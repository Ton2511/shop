<!-- views/shop/categories.ejs -->
<div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
  </div>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="/images/Carousel1.png" class="d-block w-100" alt="...">
    </div>
    <div class="carousel-item">
      <img src="/images/Carousel2.png" class="d-block w-100" alt="...">
    </div>
    <div class="carousel-item">
      <img src="/images/Carousel3.png" class="d-block w-100" alt="...">
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<div class="container my-5">
  <h1 class="my-4 text-dark">หมวดหมู่สินค้า</h1>
  
  <div class="row">
    <div class="col-md-12">
      <% if (categories && categories.length > 0) { %>
        <div class="product-grid row row-cols-2 row-cols-sm-2 row-cols-md-3 row-cols-lg-5">
          <% categories.forEach(category => { %>
            <div class="col mb-4">
              <div class="product-item h-100 border shadow-sm rounded">
                <a href="/shop/category/<%= category.id %>" title="<%= category.name %>" class="a">
                  <figure class="m-0 p-3 text-center">
                    <% if (category.image) { %>
                      <img src="<%= category.image %>" alt="<%= category.name %>" class="tab-image" style="height: 150px; object-fit: contain;">
                    <% } else { %>
                      <div class="bg-light d-flex justify-content-center align-items-center py-4" style="height: 150px;">
                        <i class="bi bi-collection fs-1 text-muted"></i>
                      </div>
                    <% } %>
                  </figure>
                  <div class="d-flex flex-column text-center p-3 pt-0">
                    <h3 class="fs-5 fw-normal text-dark"><%= category.name %></h3>
                    <div class="d-flex justify-content-center align-items-center gap-2 mt-1">
                      <span class="text-dark small">สินค้า: 
                        <% if (Array.isArray(category.products)) { %>
                          <%= category.products.length %> 
                        <% } else { %>
                          0
                        <% } %>
                        รายการ
                      </span>
                    </div>
                  </div>
                </a>
              </div>
            </div>
          <% }) %>
        </div>
      <% } else { %>
        <div class="col-12 text-center py-5">
          <div class="alert alert-info">
            <i class="bi bi-info-circle me-2"></i>
            ยังไม่มีหมวดหมู่สินค้าในระบบ
          </div>
        </div>
      <% } %>
    </div>
  </div>
  
  <div class="text-center mt-4 mb-5">
    <a href="/shop/products" class="btn btn-outline-primary">
      <i class="bi bi-grid me-2"></i>
      ดูสินค้าทั้งหมด
    </a>
  </div>
</div>

<style>
  .product-item {
    transition: all 0.3s ease;
    border: 1px solid #f0f0f0;
    height: 100%;
    display: flex;
    flex-direction: column;
  }
  
  .product-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important;
  }
  
  .product-item figure {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .tab-image {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
  }
  
  .product-item a {
    display: flex;
    flex-direction: column;
    height: 100%;
  }
  
  .a {
    text-decoration: none;
    color: inherit;
  }
  
  /* Mobile Responsive Styles */
  @media (max-width: 576px) {
    .carousel-item img {
      height: 180px;
      object-fit: cover;
    }
    
    .product-item {
      height: 250px;
    }
    
    .product-item figure {
      height: 120px;
    }
    
    .tab-image {
      height: 100px !important;
    }
    
    h1 {
      font-size: 1.8rem;
    }
    
    .fs-5 {
      font-size: 1rem !important;
    }
    
    .container {
      padding-left: 10px;
      padding-right: 10px;
    }
  }
</style>